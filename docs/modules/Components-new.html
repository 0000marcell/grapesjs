<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Component Manager | GrapesJS</title>
    <meta name="description" content="GrapesJS documentation">
    <link rel="icon" href="/docs/logo-icon.png">
  <link rel="stylesheet" href="../stylesheets/grapes.min.css?v0.15.3">
  <script src="../js/grapes.min.js?v0.15.3"></script>
    
    <link rel="preload" href="/docs/assets/css/styles.6a66ea2c.css" as="style"><link rel="preload" href="/docs/assets/js/app.6a66ea2c.js" as="script"><link rel="preload" href="/docs/assets/js/39.ff6ba2ff.js" as="script"><link rel="prefetch" href="/docs/assets/js/1.d88ab8c2.js"><link rel="prefetch" href="/docs/assets/js/10.6d1da19c.js"><link rel="prefetch" href="/docs/assets/js/11.e1024e3c.js"><link rel="prefetch" href="/docs/assets/js/12.ea2d0633.js"><link rel="prefetch" href="/docs/assets/js/13.0aca6e95.js"><link rel="prefetch" href="/docs/assets/js/14.3a556795.js"><link rel="prefetch" href="/docs/assets/js/15.b8e65128.js"><link rel="prefetch" href="/docs/assets/js/16.9e8d0ee3.js"><link rel="prefetch" href="/docs/assets/js/17.fea2549e.js"><link rel="prefetch" href="/docs/assets/js/18.112c9d7a.js"><link rel="prefetch" href="/docs/assets/js/19.da3eb438.js"><link rel="prefetch" href="/docs/assets/js/2.3f947d80.js"><link rel="prefetch" href="/docs/assets/js/20.abef129a.js"><link rel="prefetch" href="/docs/assets/js/21.45665626.js"><link rel="prefetch" href="/docs/assets/js/22.f3f10b93.js"><link rel="prefetch" href="/docs/assets/js/23.85818d14.js"><link rel="prefetch" href="/docs/assets/js/24.6618a793.js"><link rel="prefetch" href="/docs/assets/js/25.3fa3e444.js"><link rel="prefetch" href="/docs/assets/js/26.19837d20.js"><link rel="prefetch" href="/docs/assets/js/27.49115d17.js"><link rel="prefetch" href="/docs/assets/js/28.0cb791cd.js"><link rel="prefetch" href="/docs/assets/js/29.60349f33.js"><link rel="prefetch" href="/docs/assets/js/3.58555975.js"><link rel="prefetch" href="/docs/assets/js/30.4f7b4a19.js"><link rel="prefetch" href="/docs/assets/js/31.3f9b4c2f.js"><link rel="prefetch" href="/docs/assets/js/32.2fb15c2c.js"><link rel="prefetch" href="/docs/assets/js/33.10f2e2c4.js"><link rel="prefetch" href="/docs/assets/js/34.b00a201b.js"><link rel="prefetch" href="/docs/assets/js/35.842b3faa.js"><link rel="prefetch" href="/docs/assets/js/36.cf215dd2.js"><link rel="prefetch" href="/docs/assets/js/37.1f4e9422.js"><link rel="prefetch" href="/docs/assets/js/38.41db2434.js"><link rel="prefetch" href="/docs/assets/js/4.c61ce6cc.js"><link rel="prefetch" href="/docs/assets/js/40.2afed73e.js"><link rel="prefetch" href="/docs/assets/js/41.8a6c4d0c.js"><link rel="prefetch" href="/docs/assets/js/42.ac8b349a.js"><link rel="prefetch" href="/docs/assets/js/43.53781928.js"><link rel="prefetch" href="/docs/assets/js/44.ee1dfbc2.js"><link rel="prefetch" href="/docs/assets/js/5.763a4c86.js"><link rel="prefetch" href="/docs/assets/js/6.06855135.js"><link rel="prefetch" href="/docs/assets/js/7.de412c56.js"><link rel="prefetch" href="/docs/assets/js/8.2eb536bf.js"><link rel="prefetch" href="/docs/assets/js/9.7883b5a7.js">
    <link rel="stylesheet" href="/docs/assets/css/styles.6a66ea2c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" class="logo"><span class="site-name can-hide">
      GrapesJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://opencollective.com/grapesjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support Us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://twitter.com/grapesjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/artf/grapesjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://opencollective.com/grapesjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support Us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://twitter.com/grapesjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/artf/grapesjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div id="native-carbon" class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">Introduction</a></li><li><a href="/docs/getting-started.html" class="sidebar-link">Getting Started</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Modules</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/modules/Assets.html" class="sidebar-link">Assets</a></li><li><a href="/docs/modules/Blocks.html" class="sidebar-link">Blocks</a></li><li><a href="/docs/modules/Commands.html" class="sidebar-link">Commands</a></li><li><a href="/docs/modules/Components.html" class="sidebar-link">Components</a></li><li><a href="/docs/modules/Components-js.html" class="sidebar-link">Components &amp; JS</a></li><li><a href="/docs/modules/Traits.html" class="sidebar-link">Traits</a></li><li><a href="/docs/modules/Style-manager.html" class="sidebar-link">Style Manager</a></li><li><a href="/docs/modules/Storage.html" class="sidebar-link">Storage Manager</a></li><li><a href="/docs/modules/Plugins.html" class="sidebar-link">Plugins</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Guides</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/guides/Replace-Rich-Text-Editor.html" class="sidebar-link">Replace Rich Text Editor</a></li><li><a href="/docs/guides/Custom-CSS-parser.html" class="sidebar-link">Use Custom CSS Parser</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="component-manager"><a href="#component-manager" aria-hidden="true" class="header-anchor">#</a> Component Manager</h1><p>The Component is the base element for template composition. It is atomic, so elements like images, text boxes, maps, etc. fit the definition of a Component. The concept of the component was made to allow the developer to bind different behaviors to different elements. Like for example, opening the Asset Manager on double click of the image.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This guide is referring to GrapesJS v0.14.67 or higher</p></div><p></p><div class="table-of-contents"><ul><li><a href="#how-components-work">How Components work?</a><ul><li><a href="#component-definition">Component Definition</a></li><li><a href="#component-recognition-and-component-type-stack">Component Recognition and Component Type Stack</a></li><li><a href="#component-creation">Component Creation</a></li><li><a href="#component-rendering">Component Rendering</a></li></ul></li><li><a href="#built-in-components">Built-in Components</a></li><li><a href="#define-new-component">Define new Component</a></li><li><a href="#component-recognition">Component recognition</a></li><li><a href="#define-new-component">Define new Component</a></li><li><a href="#update-component-type">Update Component type</a></li><li><a href="#improvement-over-addtype">Improvement over addType <span class="badge tip top">0.14.50+</span></a><ul><li><a href="#extend-parent-functions">Extend parent functions <span class="badge tip top">0.14.60+</span></a></li></ul></li><li><a href="#lifecycle-hooks">Lifecycle Hooks</a></li><li><a href="#components-js">Components &amp; JS</a></li><li><a href="#hints">Hints</a></li></ul></div><p></p><h2 id="how-components-work"><a href="#how-components-work" aria-hidden="true" class="header-anchor">#</a> How Components work?</h2><p>Let's see in detail how components work by looking at all steps from adding an HTML string to the editor.</p><p>This is how we can add new components to the canvas:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Append components directly to the canvas</span>
editor<span class="token punctuation">.</span><span class="token function">addComponents</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&lt;div&gt;
  &lt;img src=&quot;https://path/image&quot; /&gt;
  &lt;span title=&quot;foo&quot;&gt;Hello world!!!&lt;/span&gt;
&lt;/div&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or into some, already defined, component.</span>
<span class="token comment">// For instance, appending to a selected component would be:</span>
editor<span class="token punctuation">.</span><span class="token function">getSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&lt;div&gt;...`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Actually, editor.addComponents is an alias of...</span>
editor<span class="token punctuation">.</span><span class="token function">getWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&lt;div&gt;...`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you need to append a component in a specific position, you can use <code>at</code> option. To add a component on top of all others (in the same collection) you would use</p><div class="language-js extra-class"><pre class="language-js"><code>component<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;...'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> at<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>or in the middle</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> length <span class="token punctuation">}</span> <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
component<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;...'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> at<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div><h3 id="component-definition"><a href="#component-definition" aria-hidden="true" class="header-anchor">#</a> Component Definition</h3><p>In the first step the HTML string is parsed and trasformed to what is called <strong>Component Definition</strong>, so the result of the input would be:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  tagName<span class="token punctuation">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'image'</span><span class="token punctuation">,</span>
      attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">'https://path/image'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      tagName<span class="token punctuation">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
      type<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
      attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      components<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'textnode'</span><span class="token punctuation">,</span>
        content<span class="token punctuation">:</span> <span class="token string">'Hello wdsforld!!!'</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The real <strong>Component Definition</strong> would be a little bit bigger so we reduced the JSON for the sake of simplicity.</p><p>You can notice the result is similar to what is generally called a <strong>Virtual DOM</strong>, a lightweight rappresentation of the DOM element. This actually helps the editor to keep track of the state of our elements and make performance-friendly changes/updates.
The meaning of properties like <code>tagName</code>, <code>attributes</code> and <code>components</code> are quite obvious, but what about <code>type</code>?! This particular property specifies the actual <strong>Component</strong> of our <strong>Component Definition</strong> (you check the list of default components <a href="#built-in-components">below</a>) and if it's omitted, the default one will be used <code>type: 'default'</code>.
At this point, a good question would be, how the editor assignes those types by starting from a simple HTML string? This step is identified as <strong>Component Recognition</strong> and it's explained in detail in the next paragraph.</p><h3 id="component-recognition-and-component-type-stack"><a href="#component-recognition-and-component-type-stack" aria-hidden="true" class="header-anchor">#</a> Component Recognition and Component Type Stack</h3><p>As we said before, when you pass an HTML string as a component to the editor, that string is parsed and compiled to the <a href="#component-definition">Component Definition</a> with a new <code>type</code> property. To understand what <code>type</code> should be assigned, for each parsed HTML Element, the editor iterates over all the defined components, called <strong>Component Type Stack</strong>, and checks via <code>isComponent</code> method (we will see it later) if that component type is appropriate for that element. The Component Type Stack is just a simple array of components but the important part is the order of those components. Any new added Custom Component (we'll see later how to create them) goes on top of the Component Type Stack and each element returned from the parser iterates the stack from top to bottom (the last element of the stack is the <code>default</code> one), the iteration stops once one of the component returns a truthy value from the <code>isComponent</code> method.</p><p>SVG - ComponentTypeStack</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you're importing big chunks of HTML code you might want to improve the performances by skipping the parsing and the component recognition steps by passing directly Component Definiton objects or using the JSX syntax. Read more about it here...TODO</p></div><h3 id="component-creation"><a href="#component-creation" aria-hidden="true" class="header-anchor">#</a> Component Creation</h3><p>Once the <strong>Component Definition</strong> is ready and the type is assigned, the <a href="api/component">Component</a> instance can be created (known also as the <strong>Model</strong>). Let's step back to our previous example with the HTML string, the result of the <code>append</code> method is an array of added components.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> component <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">addComponents</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&lt;div&gt;
  &lt;img src=&quot;https://path/image&quot; /&gt;
  &lt;span title=&quot;foo&quot;&gt;Hello world!!!&lt;/span&gt;
&lt;/div&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>The Component instance contains properties and methods which allows you to obtain its data and change them.
You can read properties with the <code>get</code> method, like, for example, the <code>type</code></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> componentType <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// eg. 'image'</span>
</code></pre></div><p>and to update properties you'd use <code>set</code>, which might change the way a component behavies in the canvas.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Make the component not draggable</span>
component<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'draggable'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also use methods like <code>getAttributes</code>, <code>setAttributes</code>, <code>components</code>, etc.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> innerComponents <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Update component content</span>
component<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&lt;div&gt;Component 1&lt;/div&gt;&lt;div&gt;Component 2&lt;/div&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Each component can define its own properties and methods but all of them will always extend, at least, the <code>default</code> one (then you will see how to create new custom components and how to extend the already defined) so it's good to check the <a href="api/component">Component API</a> to see all available properties and methods.</p><p>The <strong>main purpose of the Component</strong> is to keep track of its data and to return them when necessary. One common thing you might need to ask from the component is to show its current HTML</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> componentHTML <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">toHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will return a string containing the HTML of the component and all of its children.
The component implements also <code>toJSON</code> methods so you can get its JSON structure in this way</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For storing/loading all the components you should rely on the <a href="modules/storage">Storage Manager</a></p></div><p>The Component instance is responable for the <strong>final data</strong> (eg. HTML, JSON) of your templates, so if you need, for example, to update/add some attribute in the HTML you need to update its component (eg. <code>component.addAttributes({ title: 'Title added' })</code>), so the Component/Model is your <strong>Source of Truth</strong>.</p><h3 id="component-rendering"><a href="#component-rendering" aria-hidden="true" class="header-anchor">#</a> Component Rendering</h3><p>Another important thing of components is how they are rendered in the <strong>canvas</strong>, this aspect is handled by the <strong>View</strong> of the component. It has nothing to do with the <strong>final data</strong>, you can return a big <code>&lt;div&gt;...&lt;/div&gt;</code> string as HTML of your component but render it as a simple image in the canvas (think about placeholders for complex/dynamic data).</p><p>So, by default, the view of components is automatically synced with the data of its models (you can't have a View without a Model). If you update the attribute of the component or append a new one as a child, the view will render it in the canvas.
Unfotunatelly, sometimes, you might need some additional logic to handle better the component result. Think about allowing a user build its <code>&lt;table&gt;</code> element, for this specific case you might want to add custom buttons in the canvas, so it'd be easier adding/removing columns/rows. To handle those cases you can rely on the View, where you can add additional DOM component, attach events, etc. All of this will be completely unrelated with the final HTML of the <code>&lt;table&gt;</code> (the result the user would expect) as it handled by the Model.
Once the component is rendered (when you actually see it in the canvas) you can always access its View and the DOM element.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> component <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the View</span>
<span class="token keyword">const</span> view <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the DOM element</span>
<span class="token keyword">const</span> el <span class="token operator">=</span>  component<span class="token punctuation">.</span><span class="token function">getEl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>So generally, the View is something you wouldn't need to change as the default one handles already the sync with the Model but in case you'd need more control over elements (eg. custom UI in canvas) you'll probably need to create a custom component and extend the default View with your logic. We'll see later how to create custom components.</p><p>So far we have seen the core concept behind Components and how they work. The <strong>Model/Component</strong> is the <strong>source of truth</strong> for the final code of templates (eg. the HTML export relies on it) and the <em>View/ComponentView</em> is what is used by the editor to <strong>preview our components</strong> to users in the canvas.</p><p>TODO
A more advanced use case of custom components is an implementation of a custom renderer inside of them</p><h2 id="built-in-components"><a href="#built-in-components" aria-hidden="true" class="header-anchor">#</a> Built-in Components</h2><p>Here below you can see the list of built-in components, ordered by their position in the Component Type Stack</p><ul><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTableCell.js" target="_blank" rel="noopener noreferrer"><code>cell</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;td&gt;</code> and <code>&lt;th&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTableRow.js" target="_blank" rel="noopener noreferrer"><code>row</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;tr&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTable.js" target="_blank" rel="noopener noreferrer"><code>table</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;table&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTableHead.js" target="_blank" rel="noopener noreferrer"><code>thead</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;thead&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTableBody.js" target="_blank" rel="noopener noreferrer"><code>tbody</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;tbody&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTableFoot.js" target="_blank" rel="noopener noreferrer"><code>tfoot</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;tfoot&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentMap.js" target="_blank" rel="noopener noreferrer"><code>map</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;a&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentLink.js" target="_blank" rel="noopener noreferrer"><code>link</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;a&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentLabel.js" target="_blank" rel="noopener noreferrer"><code>label</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle properly <code>&lt;label&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentVideo.js" target="_blank" rel="noopener noreferrer"><code>video</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for videos</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentImage.js" target="_blank" rel="noopener noreferrer"><code>image</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for images</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentScript.js" target="_blank" rel="noopener noreferrer"><code>script</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle <code>&lt;script&gt;</code> elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentSvg.js" target="_blank" rel="noopener noreferrer"><code>svg</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for handle SVG elements</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentComment.js" target="_blank" rel="noopener noreferrer"><code>comment</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Component for comments (might be useful for email editors)</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentTextNode.js" target="_blank" rel="noopener noreferrer"><code>textnode</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Similar to the textnode in DOM definition, so a text element without a tag element.</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentText.js" target="_blank" rel="noopener noreferrer"><code>text</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - A simple text component that can be edited inline</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/ComponentWrapper.js" target="_blank" rel="noopener noreferrer"><code>wrapper</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - The canvas need to contain a root component, a wrapper, this component was made to identify it</li><li><a href="https://github.com/artf/grapesjs/blob/dev/src/dom_components/model/Component.js" target="_blank" rel="noopener noreferrer"><code>default</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Default base component</li></ul><h2 id="define-new-component"><a href="#define-new-component" aria-hidden="true" class="header-anchor">#</a> Define new Component</h2><p>Now that we know how components work, we can start exploring the process of creating new <strong>Custom Components</strong>.</p><p>Let's say we want to make the editor understand and handle better <code>&lt;input&gt;</code> elements</p><p>First of all, place your components inside a plugin</p><p>--- OLD</p><h2 id="component-recognition"><a href="#component-recognition" aria-hidden="true" class="header-anchor">#</a> Component recognition</h2><p>But now, how does the editor recognize which Component to bind to the <code>img</code> element and what to do with the <code>span</code> one?
Each Component inherits, from the base one, a particular static method</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {HTMLElement} el
 * @return {Object}
 */</span>
<span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This method gives us the possibility to recognize and bind component types to each HTMLElement (div, img, iframe, etc.). Each <strong>HTML string/element</strong> introduced inside the canvas will be processed by <code>isComponent</code> of all available types and if it matches, the object represented the type should be returned. The method <code>isComponent</code><strong>is skipped</strong> if you add the component object (<code>{ type: 'my-custom-type', tagName: 'div', attribute: {...}, ...}</code>) or declare the type explicitly on the element (<code>&lt;div data-gjs-type=&quot;my-custom-type&quot;&gt;...&lt;/div&gt;</code>)</p><p>For example, with the image component this method looks like:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Image component</span>
<span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'IMG'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'image'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let's try with something that might look a little bit tricky. What about a Google Map?!? Google Maps are generally embedded as <code>iframe</code>s, but the template can be composed by a lot of different <code>iframe</code>s. How can I tell the editor that a particular iframe is actually a Google's Map? Well, you'll have to figure out the right pattern, you have the <code>HTMLElement</code> so you can make all the checks you want. In this particular case this pattern is used:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Map component</span>
<span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'IFRAME'</span> <span class="token operator">&amp;&amp;</span> <span class="token regex">/maps\.google\.com/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span> src<span class="token punctuation">:</span> el<span class="token punctuation">.</span>src<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>In addition to <code>tagName</code> check, we also used the <code>src</code> property, but you can actually override it with your own logic by extending the built-in component.</p><h2 id="define-new-component-2"><a href="#define-new-component-2" aria-hidden="true" class="header-anchor">#</a> Define new Component</h2><p>Let's see an example with another HTML element that is not handled by default Component types. What about <code>input</code> elements?</p><p>With the default GrapesJS configuration <code>input</code>s are treated like any other element; you can move it around, style it, etc. However, we'd like to handle this type of element more specifically. In this case, we have to create a new Component type.</p><p>Let's define few specs for our new <em>Input</em> type:</p><ul><li>Can be dropped only inside <code>form</code> elements</li><li>Can't drop other elements inside it</li><li>Can change the type of the input (text, password, email, etc.)</li><li>Can make it required for the form</li></ul><p>To define a new Component type you need to choose from which built-in Component inherit its properties, in our case we just gonna choose the default one. Let's see a complete example of the new type definition</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Get DomComponents module</span>
<span class="token keyword">var</span> comps <span class="token operator">=</span> editor<span class="token punctuation">.</span>DomComponents<span class="token punctuation">;</span>

<span class="token comment">// Get the model and the view from the default Component type</span>
<span class="token keyword">var</span> defaultType <span class="token operator">=</span> comps<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> defaultModel <span class="token operator">=</span> defaultType<span class="token punctuation">.</span>model<span class="token punctuation">;</span>
<span class="token keyword">var</span> defaultView <span class="token operator">=</span> defaultType<span class="token punctuation">.</span>view<span class="token punctuation">;</span>

<span class="token keyword">var</span> inputTypes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Text'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Email'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Password'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">'number'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Number'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// The `input` will be the Component type ID</span>
comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// Define the Model</span>
  model<span class="token punctuation">:</span> defaultModel<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Extend default properties</span>
    defaults<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> defaultModel<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// Can be dropped only inside `form` elements</span>
      draggable<span class="token punctuation">:</span> <span class="token string">'form, form *'</span><span class="token punctuation">,</span>
      <span class="token comment">// Can't drop other elements inside it</span>
      droppable<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// Traits (Settings)</span>
      traits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'placeholder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token comment">// Change the type of the input (text, password, email, etc.)</span>
          type<span class="token punctuation">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
          label<span class="token punctuation">:</span> <span class="token string">'Type'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'type'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> inputTypes<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
          <span class="token comment">// Can make it required for the form</span>
          type<span class="token punctuation">:</span> <span class="token string">'checkbox'</span><span class="token punctuation">,</span>
          label<span class="token punctuation">:</span> <span class="token string">'Required'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'required'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// The second argument of .extend are static methods and we'll put inside our</span>
  <span class="token comment">// isComponent() method. As you're putting a new Component type on top of the stack,</span>
  <span class="token comment">// not declaring isComponent() might probably break stuff, especially if you extend</span>
  <span class="token comment">// the default one.</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'INPUT'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token comment">// Define the View</span>
  view<span class="token punctuation">:</span> defaultType<span class="token punctuation">.</span>view<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The code above is pretty much self-explanatory and as you see a lot of work is basically done on top of the Model properties.
The <em>View</em> is just extending the default one, so to cover also this part let's add some random behavior.</p><div class="language-js extra-class"><pre class="language-js"><code>comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> defaultType<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Bind events</span>
    events<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// If you want to bind the event to children elements</span>
      <span class="token comment">// 'click .someChildrenClass': 'methodName',</span>
      click<span class="token punctuation">:</span> <span class="token string">'handleClick'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">dblclick</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// It doesn't make too much sense this method inside the component</span>
    <span class="token comment">// but it's ok as an example</span>
    <span class="token function-variable function">randomHex</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">16777216</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">handleClick</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- Affects the final HTML code</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- Doesn't affect the final HTML code</span>
      <span class="token comment">// Tip: updating the model will reflect the changes to the view, so, in this case,</span>
      <span class="token comment">// if you put the model change after the DOM one this will override the backgroundColor</span>
      <span class="token comment">// change made before</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// The render() should return 'this'</span>
    <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Extend the original render method</span>
      defaultType<span class="token punctuation">.</span>view<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>placeholder <span class="token operator">=</span> <span class="token string">'Text here'</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- Doesn't affect the final HTML code</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>From the example above you can notice few interesting things: how to bind events, how to update directly the DOM and how to update the model. The difference between updating the DOM and the model is that the HTML code (the one you get with <code>editor.getHtml()</code>) is generated from the <em>Model</em> so updating directly the DOM will not affect it, it's just the change for the canvas.</p><h2 id="update-component-type"><a href="#update-component-type" aria-hidden="true" class="header-anchor">#</a> Update Component type</h2><p>Here an example of how easily you can update/override the component</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> originalMap <span class="token operator">=</span> comps<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> originalMap<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Override how the component is rendered to HTML</span>
    <span class="token function-variable function">toHTML</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'&lt;div&gt;My Custom Map&lt;/div&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... new logic for isComponent</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> originalMap<span class="token punctuation">.</span>view
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="improvement-over-addtype"><a href="#improvement-over-addtype" aria-hidden="true" class="header-anchor">#</a> Improvement over addType <span class="badge tip top">0.14.50+</span></h2><p>Now, with the <a href="https://github.com/artf/grapesjs/releases/tag/v0.14.50" target="_blank" rel="noopener noreferrer">0.14.50<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> release, defining new components or extending them is a bit easier (without breaking the old process)</p><ul><li>If you don't specify the type to extend, the <code>default</code> one will be used. In that case, you just
use objects for <code>model</code> and <code>view</code></li><li>The <code>defaults</code> property, in the <code>model</code>, will be merged automatically with defaults of the parent component</li><li>If you use an object in <code>model</code> you can specify <code>isComponent</code> outside or omit it. In this case,
the <code>isComponent</code> is not mandatory but without it means the parser won't be able to identify the component
if not explicitly declared (eg. <code>&lt;div data-gjs-type=&quot;new-component&quot;&gt;...&lt;/div&gt;</code>)</li></ul><p><strong>Before</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultType <span class="token operator">=</span> comps<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'new-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> defaultType<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    defaults<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>defaultType<span class="token punctuation">.</span>model<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span>
      someprop<span class="token punctuation">:</span> <span class="token string">'somevalue'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// Even if it returns false, declaring isComponent is mandatory</span>
    <span class="token function">isComponent</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> defaultType<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>After</strong></p><div class="language-js extra-class"><pre class="language-js"><code>comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'new-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// We can even omit isComponent here, as `false` return will be the default behavior</span>
  <span class="token function-variable function">isComponent</span><span class="token punctuation">:</span> <span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    defaults<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      someprop<span class="token punctuation">:</span> <span class="token string">'somevalue'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>If you need to extend some component, you can use <code>extend</code> and <code>extendView</code> property.</li><li>You can now omit <code>view</code> property if you don't need to change it</li></ul><p><strong>Before</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> originalMap <span class="token operator">=</span> comps<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> originalMap<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">isComponent</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... usually, you'd reuse the same logic</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// Even if I do nothing in view, I have to specify it</span>
  view<span class="token punctuation">:</span> originalMap<span class="token punctuation">.</span>view
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>After</strong></p><p>The <code>map</code> type is already defined, so it will be used as a base for the model and view.
We can skip <code>isComponent</code> if the recognition logic is the same of the extended component.</p><div class="language-js extra-class"><pre class="language-js"><code>comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Extend the <code>model</code> and <code>view</code> with some other, already defined, components.</p><div class="language-js extra-class"><pre class="language-js"><code>comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  extend<span class="token punctuation">:</span> <span class="token string">'other-defined-component'</span><span class="token punctuation">,</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Will extend 'other-defined-component'</span>
  view<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Will extend 'other-defined-component'</span>
  <span class="token comment">// `isComponent` will be taken from `map`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>comps<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  extend<span class="token punctuation">:</span> <span class="token string">'other-defined-component'</span><span class="token punctuation">,</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Will extend 'other-defined-component'</span>
  extendView<span class="token punctuation">:</span> <span class="token string">'other-defined-component-2'</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Will extend 'other-defined-component-2'</span>
  <span class="token comment">// `isComponent` will be taken from `map`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="extend-parent-functions"><a href="#extend-parent-functions" aria-hidden="true" class="header-anchor">#</a> Extend parent functions <span class="badge tip top">0.14.60+</span></h3><p>When you need to reuse functions, of the parent you're extending, you can avoid writing something like this in any function:</p><div class="language-js extra-class"><pre class="language-js"><code>domc<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'parent-type'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>model<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>by using <code>extendFn</code> and <code>extendFnView</code> arrays:</p><div class="language-js extra-class"><pre class="language-js"><code>domc<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'new-type'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  extend<span class="token punctuation">:</span> <span class="token string">'parent-type'</span><span class="token punctuation">,</span>
  extendFn<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'init'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// array of model functions to extend</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// do something;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The same would be for the view by using <code>extendFnView</code></p><h2 id="lifecycle-hooks"><a href="#lifecycle-hooks" aria-hidden="true" class="header-anchor">#</a> Lifecycle Hooks</h2><p>Each component triggers different lifecycle hooks, which allows you to add custom actions at their specific stages.
We can distinguish 2 different types of hooks: <strong>global</strong> and <strong>local</strong>.
You define <strong>local</strong> hooks when you create/extend a component type (usually via some <code>model</code>/<code>view</code> method) and the reason is to react to an event of that
particular component type. Instead, the <strong>global</strong> one, will be called indistinctly on any component (you listen to them via <code>editor.on</code>) and you can make
use of them for a more generic use case or also listen to them inside other components.</p><p>Let's see below the flow of all hooks:</p><ul><li><strong>Local hook</strong>: <code>model.init()</code> method, executed once the model of the component is initiliazed</li><li><strong>Global hook</strong>: <code>component:create</code> event, called right after <code>model.init()</code>. The model is passed as an argument to the callback function.
Es. <code>editor.on('component:create', model =&gt; console.log('created', model))</code></li><li><strong>Local hook</strong>: <code>view.init()</code> method, executed once the view of the component is initiliazed</li><li><strong>Local hook</strong>: <code>view.onRender()</code> method, executed once the component is rendered on the canvas</li><li><strong>Global hook</strong>: <code>component:mount</code> event, called right after <code>view.onRender()</code>. The model is passed as an argument to the callback function.</li><li><strong>Local hook</strong>: <code>model.updated()</code> method, executes when some property of the model is updated.</li><li><strong>Global hook</strong>: <code>component:update</code> event, called after <code>model.updated()</code>. The model is passed as an argument to the callback function.
You can also listen to specific property change via <code>component:update:{propertyName}</code></li><li><strong>Local hook</strong>: <code>model.removed()</code> method, executed when the component is removed.</li><li><strong>Global hook</strong>: <code>component:remove</code> event, called after <code>model.removed()</code>. The model is passed as an argument to the callback function.</li></ul><p>Below you can find an example usage of all the hooks</p><div class="language-js extra-class"><pre class="language-js"><code>editor<span class="token punctuation">.</span>DomComponents<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'test-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    defaults<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      testprop<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Local hook: model.init'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listenTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'change:testprop'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlePropChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Here we can listen global hooks with editor.on('...')</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter">property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> prevValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Local hook: model.updated'</span><span class="token punctuation">,</span>
        <span class="token string">'property'</span><span class="token punctuation">,</span> property<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token string">'prevValue'</span><span class="token punctuation">,</span> prevValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">removed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Local hook: model.removed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handlePropChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The value of testprop'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'testprop'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  view<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Local hook: view.init'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Local hook: view.onRender'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A block for the custom component</span>
editor<span class="token punctuation">.</span>BlockManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'test-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  label<span class="token punctuation">:</span> <span class="token string">'Test Component'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token string">'&lt;div data-gjs-type=&quot;test-component&quot;&gt;Test Component&lt;/div&gt;'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Global hooks</span>
editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`component:create`</span></span><span class="token punctuation">,</span> <span class="token parameter">model</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Global hook: component:create'</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`component:mount`</span></span><span class="token punctuation">,</span> <span class="token parameter">model</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Global hook: component:mount'</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`component:update:testprop`</span></span><span class="token punctuation">,</span> <span class="token parameter">model</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Global hook: component:update:testprop'</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`component:remove`</span></span><span class="token punctuation">,</span> <span class="token parameter">model</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Global hook: component:remove'</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="components-js"><a href="#components-js" aria-hidden="true" class="header-anchor">#</a> Components &amp; JS</h2><p>If you want to know how to create Components with javascript attached (eg. counters, galleries, slideshows, etc.) check the dedicated page
<a href="/docs/modules/Components-js.html">Components &amp; JS</a></p><h2 id="hints"><a href="#hints" aria-hidden="true" class="header-anchor">#</a> Hints</h2><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gjs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 ...
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cutom-element</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cutom-element</span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">var</span> editor <span class="token operator">=</span> grapesjs<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      container <span class="token punctuation">:</span> <span class="token string">'#gjs'</span><span class="token punctuation">,</span>
      fromElement<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  editor<span class="token punctuation">.</span>DomComponents<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'cutom-element-type'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In the example above the editor will not get the new type from the HTML because the content is already parsed and appended, so it'll get it only with new components (eg. from Blocks)</p><p>Solution 1: turn off <code>autorender</code></p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">var</span> editor <span class="token operator">=</span> grapesjs<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      autorender<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      container <span class="token punctuation">:</span> <span class="token string">'#gjs'</span><span class="token punctuation">,</span>
      fromElement<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  editor<span class="token punctuation">.</span>DomComponents<span class="token punctuation">.</span><span class="token function">addType</span><span class="token punctuation">(</span><span class="token string">'cutom-element-type'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// after all new types</span>
  editor<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Solution 2: put all the stuff inside a plugin (<a href="/docs/modules/Plugins.html">Creating plugins</a>)</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/artf/grapesjs/edit/dev/docs/modules/Components-new.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">8/13/2019, 5:17:26 PM</span></div></div><!----></div></div></div>
    <script src="/docs/assets/js/app.6a66ea2c.js" defer></script><script src="/docs/assets/js/39.ff6ba2ff.js" defer></script>
  </body>
</html>
